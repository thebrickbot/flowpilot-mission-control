# ╔══════════════════════════════════════════════════════════════════╗
# ║  FlowPilot Mission Control — Backend Environment                ║
# ║  Copy to .env and fill in your values                           ║
# ╚══════════════════════════════════════════════════════════════════╝

# ── Runtime ──────────────────────────────────────────────────────────────────
ENVIRONMENT=dev
LOG_LEVEL=INFO
LOG_FORMAT=text
LOG_USE_UTC=false
REQUEST_LOG_SLOW_MS=1000
REQUEST_LOG_INCLUDE_HEALTH=false

# ── Database ──────────────────────────────────────────────────────────────────
# Atlas native (PostgreSQL via Homebrew):
DATABASE_URL=postgresql+psycopg://postgres:postgres@localhost:5432/flowpilot_mc
# Auto-run Alembic migrations on startup (true in dev, false in production):
DB_AUTO_MIGRATE=false

# ── CORS ──────────────────────────────────────────────────────────────────────
# Comma-separated list of allowed frontend origins.
# Atlas local: http://localhost:3000
# LAN:         http://192.168.1.50:3000,http://localhost:3000
CORS_ORIGINS=http://localhost:3000

# ── Base URL ──────────────────────────────────────────────────────────────────
# Public URL of this backend (used for link generation, etc.)
BASE_URL=http://localhost:8000

# ── Auth ──────────────────────────────────────────────────────────────────────
# local  → shared bearer token (recommended for Atlas / single-tenant)
# clerk  → Clerk.dev SSO
AUTH_MODE=local

# REQUIRED when AUTH_MODE=local — must be non-empty and at least 50 characters.
# Generate: python3 -c "import secrets; print(secrets.token_urlsafe(48))"
LOCAL_AUTH_TOKEN=

# ── Clerk (only used when AUTH_MODE=clerk) ────────────────────────────────────
CLERK_SECRET_KEY=
CLERK_API_URL=https://api.clerk.com
CLERK_VERIFY_IAT=true
CLERK_LEEWAY=10.0

# ── Gateway ───────────────────────────────────────────────────────────────────
# Minimum acceptable OpenClaw gateway version (semver).
# Gateways below this version will be rejected.
# See docs/flowpilot-gateway-setup.md for gateway registration instructions.
GATEWAY_MIN_VERSION=2026.02.9

# ── Queue / Worker (RQ + Redis) ────────────────────────────────────────────────
# Atlas native: redis://localhost:6379/0
RQ_REDIS_URL=redis://localhost:6379/0
RQ_QUEUE_NAME=default
RQ_DISPATCH_THROTTLE_SECONDS=15.0
RQ_DISPATCH_MAX_RETRIES=3
